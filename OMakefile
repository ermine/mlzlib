.PHONY: makelib testlib testlib install clean

OCAMLFLAGS = -g

FILES = mlzlib
LIB = mlzlib

section
   INCLUDES += $(shell $(OCAMLC) -where)
   mlzlib_stub$(EXT_OBJ):

CLIBNAME = libmlzlib_stub

section
   CCLIB = $(StaticCLibrary $(CLIBNAME), mlzlib_stub)
   OCAML_LIB_FLAGS += -cclib -lz -cclib -lmlzlib_stub
   OCAMLLIBS = $(OCamlLibrary $(LIB), $(FILES))
   $(OCAMLLIBS): $(CCLIB)
   .DEFAULT: $(LIB)$(EXT_LIB)

IFILES[] =
   mlzlib

ALIBS[] = $(CLIBNAME)$(EXT_LIB)

LibInstall(makelib, $(LIB), $(IFILES), $(ALIBS))

install: makelib

.SUBDIRS: tests

clean:
   $(CLEAN)
